<form [formGroup]="addProductForm" autocomplete="off">
    <div class="">    
        <div class="field col-12">
            <span class="p-float-label">
                <input type="text" id="inputtext"   *ngIf="eventData?.id!=null && eventData?.id!=undefined" [(ngModel)]="product.sku"   readonly pInputText formControlName="sku" (keypress)="keyAplhaNumeric($event)">
                <!-- *ngIf="eventData.sku==null || eventData.sku==undefined" -->
                <!-- (input)="onInputChange(product.sku)" -->
                <input type="text" id="inputtext" (input)="onInputChange(product.sku)"  *ngIf="eventData?.id==null || eventData?.id==undefined"    pInputText [(ngModel)]="product.sku" formControlName="sku" (keypress)="keyAplhaNumeric($event)">
                <label for="inputtext">Product Item no(SKU)*</label>
            </span>
            <div style="color:Red; font-size: 10px;" *ngIf="addProductForm.get('sku').hasError('leadingSpace')">Space at the beginning is not allowed.</div>
            <div style="color:Red; font-size: 10px;" *ngIf="addProductForm.get('sku').hasError('onlySpaces')">Empty data is not allowed.</div>
        </div>



        <div class="field col-12">
            <span class="p-float-label">
                <input type="text" id="inputtext" pInputText [(ngModel)]="product.name" formControlName="name" (keypress)="keyAplhaNumeric($event)">
                <label for="inputtext">Product Name*</label>
            </span>
            <div style="color:Red; font-size: 10px;" *ngIf="addProductForm.get('name').hasError('leadingSpace')">Space at the beginning is not allowed.</div>
            <div style="color:Red; font-size: 10px;" *ngIf="addProductForm.get('name').hasError('onlySpaces')">Empty data is not allowed.</div>
        </div>

        <div class="field col-12">
            <span class="p-float-label">
                <input type="text" id="inputtext" pInputText [(ngModel)]="product.description" formControlName="description" (keypress)="keyAplhaNumeric($event)">
                <label for="inputtext">Item Description *</label>
            </span>
        </div>
        <div class="field col-12">
            <span class="p-float-label">
                <input type="text" id="inputtext" pInputText [(ngModel)]="product.short_description" formControlName="short_description" (keypress)="keyAplhaNumeric($event)">
                <label for="inputtext">Short Description *</label>
            </span>
        </div>
        <div class="field col-12">
            <span class="p-float-label">
                <input type="number" pInputText [(ngModel)]="product.price" formControlName="price" min="0">
                <label for="inputtext">Price*</label>
            </span>
            <div style="color:Red; font-size: 10px;" *ngIf="addProductForm.get('price').hasError('required')">Price is required.</div>
        </div>
        
        <div class="field col-12">
            <span class="p-float-label">
                <input type="number" pInputText [(ngModel)]="product.offer_price" formControlName="offer_price" min="0">
                <label for="inputtext">Offer Price *</label>
            </span>
            <div style="color:Red; font-size: 10px;" *ngIf="addProductForm.hasError('invalidOfferPrice')">Offer price cannot be greater than actual price.</div>
        </div>
<!--         
        <div class="field col-12">
            <span class="p-float-label">
              <p-dropdown [options]="categoryList" [(ngModel)]="product.category" formControlName="category" optionLabel="name" (onChange)="onCategoryChange($event.value)"></p-dropdown>
  
              <label for="dropdown">Category *</label>
            </span>
        </div> -->

        <div class="field col-12 full-width">
            <span class="p-float-label">
                <p-dropdown  [options]="productStatusList" appendTo="body" formControlName="product_status"
                [(ngModel)]="product.product_status" [autoDisplayFirst]="false" 
                optionLabel="name" ></p-dropdown>
                <label for="inputtext">Product Status *</label>
            </span>
            <div style="color:Red; font-size: 10px;" *ngIf="addProductForm.get('product_status').hasError('onlySpaces')">Empty data is not allowed.</div>
        </div>
        <div class="field col-12 full-width">
            <span class="p-float-label">
                <p-dropdown  [options]="categoryList" appendTo="body" formControlName="category"
                [(ngModel)]="product.category" [autoDisplayFirst]="false" 
                optionLabel="name" (onChange)="onCategoryChange($event.value)"></p-dropdown>
                <label for="inputtext">Category *</label>
            </span>
            <div style="color:Red; font-size: 10px;" *ngIf="addProductForm.get('category').hasError('onlySpaces')">Empty data is not allowed.</div>
        </div>
        
       
    

        <div class="field col-12 full-width">
            <span class="p-float-label">
                <p-dropdown inputId="subcategory" [options]="subCategoryList" appendTo="body"
                formControlName="sub_category" [(ngModel)]="product.sub_category"
                [autoDisplayFirst]="false" optionLabel="name">
            </p-dropdown>
            <label for="inputtext">Sub-Category *</label>
            
            </span>
            <div style="color:Red; font-size: 10px;" *ngIf="addProductForm.get('sub_category').hasError('onlySpaces')">Empty data is not allowed.</div>
        </div>
   

    </div>

    <div class="field col-12 full-width">
        <label for="images">Product Images *</label>
        <input type="file" id="images" (change)="onImageSelected($event)"  accept="image/*" />
      
        <!-- Existing Images from product.product_imgs -->
        <div class="image-preview" *ngIf="product.product_images?.length > 0">
          <div *ngFor="let img of product.product_images; let i = index" class="img-container">
            <img [src]="img.file_path" alt="Product Image" width="100" height="100" />
            <button type="button" (click)="removeExistingImage(i)">Remove</button>
          </div>
        </div>
      
        <!-- Newly selected Images -->
        <div class="image-preview" *ngIf="selectedImages.length > 0">
          <div *ngFor="let img of selectedImages; let i = index" class="img-container">
            <img [src]="img.preview" alt="Selected Image" width="100" height="100" />
            <button type="button" (click)="removeSelectedImage(i)">Remove</button>
          </div>
        </div>
      </div>
      
        

    <div class="popup-form-btn">
        <button pButton type="button" *ngIf="hideButton" (click)="saveProduct()" [disabled]="!addProductForm.valid" label="Save Product" class="p-button-raised" [loading]="isLoading"></button>
        <button pButton type="button" *ngIf="!hideButton" (click)="updateProduct()"  [disabled]="!addProductForm.valid" label="Update Product" class="p-button-raised" [loading]="isLoading"></button>
    
        <button pButton type="button" label="Cancel" class="p-button-outlined" (click)="close.emit($event)"></button>
    </div>
</form>    